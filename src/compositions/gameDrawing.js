import { onUnmounted, ref } from "vue";
import { getDrawing } from "../services/gameAPI-service";

const defaultSrc = "data:image/jpeg;base64,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"

export const useGameDrawing = () => {
  const draw = ref("");
  const loadDrawing = async () => {
    const data = await getDrawing();
    draw.value = data.draw || defaultSrc
  };
  loadDrawing();
  const getDrawingInterval = setInterval(loadDrawing, 1000);
  onUnmounted(() => {
    clearInterval(getDrawingInterval);
  });
  return draw;
};